# Sinosteel框架修改

## 变动记录
gitHub上sinosteel框架应用Mysql数据库，此次改动之一就是变更为oracle数据库，增加了一部分ES全文检索的内容,变动数据库时遇到很多问题，下面对面临的问题和解决办法与大家一起分享一下。 --foate

- 连接数据源问题
    - mysql建立连接时根据库名连接，oracle数据库连接的实例名称，但是oralce是区分用户的，例如实例oracle下有两个用户，一个A（含company、person表）,一个B（含company表），按照以往项目经验，以用户A的身份登录时，就看到两张表，不会看到B用户下的表，但是当前项目框架连接数据库后可能不区分，在我们的entity模型中，会在数据库中扫描到两个company表，因此会报错。
- 数据分页问题
    - 采用框架中的分页在使用mysql时正常，改为oracle就出现了问题，数据是乱的，不是我们想要的分页数据，这个问题应该跟排序、分页的先后顺序有关，目前采用了Specification这个类的方法，具体可以参考代码,另外这个类可以进行多表、多条的动态复杂查询。
- 大数据量查询效率问题
	- 当遇到大数据量检索查询时，尤其遇到模糊（LIKE）查询时，传统数据库扫描不走索引效率非常低，面对这种情况，项目框架增加了ES（elasticserch）服务部分,具体情况看代码。 
#说明
- 项目代码仅仅是为了学习和测试，有许多内容并不规范，请朋友们谅解！
- 关于oralce数据库的基础数据文件我放到resources\db目录下（SINOSTEEL_ORACLE20181123.rar） 
